<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Test Runner - Modernized JSON Data Editor</title>
		<style>
			body {
				font-family: -apple-system, BlinkMacSystemFont, "Segoe UI",
					Roboto, sans-serif;
				margin: 0;
				padding: 20px;
				background: #f5f5f5;
			}
			.container {
				max-width: 800px;
				margin: 0 auto;
				background: white;
				padding: 20px;
				border-radius: 8px;
				box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
			}
			h1 {
				color: #333;
				text-align: center;
				margin-bottom: 30px;
			}
			.test-section {
				margin-bottom: 30px;
				padding: 20px;
				border: 1px solid #ddd;
				border-radius: 8px;
			}
			.test-section h2 {
				margin-top: 0;
				color: #555;
			}
			button {
				background: #007bff;
				color: white;
				border: none;
				padding: 10px 20px;
				border-radius: 4px;
				cursor: pointer;
				font-size: 16px;
			}
			button:hover {
				background: #0056b3;
			}
			button:disabled {
				background: #ccc;
				cursor: not-allowed;
			}
			#results {
				margin-top: 20px;
				padding: 15px;
				background: #f8f9fa;
				border-radius: 4px;
				font-family: monospace;
				white-space: pre-wrap;
				max-height: 400px;
				overflow-y: auto;
			}
			.status {
				padding: 10px;
				margin: 10px 0;
				border-radius: 4px;
			}
			.status.success {
				background: #d4edda;
				color: #155724;
				border: 1px solid #c3e6cb;
			}
			.status.error {
				background: #f8d7da;
				color: #721c24;
				border: 1px solid #f5c6cb;
			}
		</style>
	</head>
	<body>
		<div class="container">
			<h1>🧪 Test Runner</h1>
			<p>Run tests for the modernized JSON Data Editor application.</p>

			<div class="test-section">
				<h2>Test Controls</h2>
				<button id="runAllTests" onclick="runAllTests()">
					Run All Tests
				</button>
				<button
					id="runDataManagerTests"
					onclick="runDataManagerTests()"
				>
					Run DataManager Tests
				</button>
				<button
					id="runValidationManagerTests"
					onclick="runValidationManagerTests()"
				>
					Run ValidationManager Tests
				</button>
				<button id="clearResults" onclick="clearResults()">
					Clear Results
				</button>
			</div>

			<div class="test-section">
				<h2>Test Results</h2>
				<div id="results">
					Click "Run All Tests" to start testing...
				</div>
			</div>
		</div>

		<!-- Load test helpers first -->
		<script type="module" src="./test-helpers.js"></script>

		<!-- Load test modules -->
		<script type="module" src="./test-data-manager.js"></script>
		<script type="module" src="./test-validation-manager.js"></script>

		<script>
			// Test runner functions
			async function runAllTests() {
				const button = document.getElementById("runAllTests");
				button.disabled = true;
				button.textContent = "Running...";

				try {
					// Clear previous results
					clearResults();

					// Run all tests
					const success = await testFramework.run();

					// Show results
					const resultsDiv = document.getElementById("results");
					const statusDiv = document.createElement("div");
					statusDiv.className = `status ${
						success ? "success" : "error"
					}`;
					statusDiv.textContent = success
						? "✅ All tests passed!"
						: "❌ Some tests failed. Check the console for details.";
					resultsDiv.appendChild(statusDiv);
				} catch (error) {
					console.error("Test runner error:", error);
					const resultsDiv = document.getElementById("results");
					resultsDiv.textContent = `Error running tests: ${error.message}`;
				} finally {
					button.disabled = false;
					button.textContent = "Run All Tests";
				}
			}

			async function runDataManagerTests() {
				// This would run only DataManager tests
				// For now, just run all tests
				await runAllTests();
			}

			async function runValidationManagerTests() {
				// This would run only ValidationManager tests
				// For now, just run all tests
				await runAllTests();
			}

			function clearResults() {
				document.getElementById("results").textContent = "";
			}

			// Auto-run tests when page loads (optional)
			// window.addEventListener('load', () => {
			//     setTimeout(runAllTests, 1000);
			// });
		</script>
	</body>
</html>
